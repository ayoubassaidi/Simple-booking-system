{% extends 'dashboard_base.html' %}
{% load static %}

{% block title %}My Services - Smart Booking{% endblock %}

{% block page_title %}My Bookings{% endblock %}
{% block page_subtitle %}Manage the services you offer to clients{% endblock %}

{% block dashboard_content %}

{% if bookings %}
<div class="table-responsive">
<table class="table align-middle">
    <thead>
        <tr>
            <th>Customer</th>
            <th>Service</th>
            <th>Date & Time</th>
            <th>Status</th>
            <th>Price</th>
            <th>Action</th>
        </tr>
    </thead>
    <tbody>
        {% for booking in bookings %}
        <tr>
            <td>
                <div class="d-flex align-items-center gap-2">
                    <img src="https://ui-avatars.com/api/?name={{ booking.customer.username }}"
                         class="rounded-circle"
                         width="40" height="40">
                    <strong>{{ booking.customer.username }}</strong>
                </div>
            </td>

            <td>{{ booking.service.name }}</td>

            <td>
                {{ booking.date }}<br>
                <small class="text-muted">
                    {{ booking.start_time }} – {{ booking.end_time }}
                </small>
            </td>

            <td>
                <span class="badge 
                    {% if booking.status == 'confirmed' %}bg-success
                    {% elif booking.status == 'pending' %}bg-warning
                    {% elif booking.status == 'cancelled' %}bg-danger
                    {% else %}bg-secondary{% endif %}
                ">
                    {{ booking.status|capfirst }}
                </span>
            </td>

            <td>€{{ booking.price }}</td>

            <td>
                <a href="#" class="btn btn-sm btn-outline-primary">View</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
</div>
{% else %}
<p class="text-muted">No bookings yet.</p>
{% endif %}
{% endblock %}
